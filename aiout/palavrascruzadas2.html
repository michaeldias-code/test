<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Palavras Cruzadas</title>

<style>
:root {
  --cell: 32px;
  --border: #ccc;
  --bg: #f4f6f7;
  --active: #ffeaa7;
  --highlight: #f1c40f;
  --correct: #d4f8c4;
  --error: #f8c4c4;
}

body {
  font-family: Arial, sans-serif;
  background: var(--bg);
  display: flex;
  justify-content: center;
  padding: 20px;
}

.container {
  background: white;
  padding: 20px;
  border-radius: 8px;
  max-width: 900px;
  width: 100%;
}

#grid {
  display: grid;
  margin-bottom: 20px;
}

.cell {
  width: var(--cell);
  height: var(--cell);
  border: 1px solid var(--border);
  position: relative;
  background: white;
}

.cell.empty {
  background: transparent;
  border: none;
}

.cell.highlight { background: var(--highlight); }
.cell.active { background: var(--active); }
.cell.correct { background: var(--correct); }
.cell.error { background: var(--error); }

.cell span {
  position: absolute;
  top: 2px;
  left: 3px;
  font-size: 0.6rem;
  font-weight: bold;
  color: #3498db;
}

.cell input {
  width: 100%;
  height: 100%;
  border: none;
  background: transparent;
  text-align: center;
  font-size: 1.2rem;
  font-weight: bold;
  text-transform: uppercase;
  outline: none;
}

.clues {
  display: flex;
  gap: 30px;
}

.clues ul {
  list-style: none;
  padding: 0;
}

.clues li {
  cursor: pointer;
  padding: 4px;
}

.clues li.active {
  background: var(--highlight);
  font-weight: bold;
}
h2{
  color: red;
}
</style>
</head>

<body>
<div class="container">
  <h2>Palavras Cruzadas</h2>

  <div id="grid"></div>

  <div class="clues">
    <div>
      <h3>Horizontal</h3>
      <ul id="clues-h"></ul>
    </div>
    <div>
      <h3>Vertical</h3>
      <ul id="clues-v"></ul>
    </div>
  </div>

  <button onclick="checkAll()">Verificar</button>
</div>

<script>
/* =====================
   DADOS (SEM ID MANUAL)
===================== */

const DATA = {
  size: 10,
  words: [
    { dir: 'H', start: [0,0], word: 'CODIGO', clue: 'InstruÃ§Ãµes do computador' },
    { dir: 'V', start: [0,2], word: 'IDEIA', clue: 'Origem de um projeto' },
    { dir: 'V', start: [0,5], word: 'DRIVE', clue: 'Armazenamento' },
    { dir: 'H', start: [2,2], word: 'DADOS', clue: 'InformaÃ§Ã£o' },
    { dir: 'V', start: [2,4], word: 'SOFTWARE', clue: 'Parte lÃ³gica' },
    { dir: 'H', start: [4,1], word: 'CACHE', clue: 'MemÃ³ria rÃ¡pida' },
    { dir: 'V', start: [4,7], word: 'HOST', clue: 'Servidor' },
    { dir: 'H', start: [6,4], word: 'LOOP', clue: 'RepetiÃ§Ã£o' },
    { dir: 'H', start: [8,0], word: 'NUVEM', clue: 'Cloud' }
  ]
};

/* =====================
   ESTADO
===================== */

const State = {
  grid: [],
  words: [],
  activeWord: null
};

/* =====================
   INIT
===================== */

init();

/* =====================
   FUNÃ‡Ã•ES
===================== */

function init() {
  createGrid();
  placeWords();
  generateNumbers();   // ðŸ‘ˆ NUMERAÃ‡ÃƒO REAL
  renderGrid();
  renderClues();
}

function createGrid() {
  State.grid = Array.from({ length: DATA.size }, (_, r) =>
    Array.from({ length: DATA.size }, (_, c) => ({
      r, c,
      letter: '',
      correct: null,
      number: null,
      startH: false,
      startV: false,
      el: null,
      input: null
    }))
  );
}

function placeWords() {
  DATA.words.forEach(w => {
    let [r, c] = w.start;
    const [dr, dc] = w.dir === 'H' ? [0,1] : [1,0];
    w.cells = [];

    for (let i = 0; i < w.word.length; i++) {
      const cell = State.grid[r][c];
      cell.correct = w.word[i];
      w.cells.push(cell);
      r += dr;
      c += dc;
    }
  });
}

/* =====================
   NUMERAÃ‡ÃƒO CORRETA
===================== */

function generateNumbers() {
  let count = 1;

  for (let r = 0; r < DATA.size; r++) {
    for (let c = 0; c < DATA.size; c++) {
      const cell = State.grid[r][c];
      if (!cell.correct) continue;

      const startsH =
        (!State.grid[r][c - 1] || !State.grid[r][c - 1]?.correct) &&
        State.grid[r][c + 1]?.correct;

      const startsV =
        (!State.grid[r - 1]?.[c] || !State.grid[r - 1]?.[c]?.correct) &&
        State.grid[r + 1]?.[c]?.correct;

      if (startsH || startsV) {
        cell.number = count++;

        if (startsH) cell.startH = true;
        if (startsV) cell.startV = true;
      }
    }
  }

  // Atribui o nÃºmero da cÃ©lula inicial a cada palavra
  DATA.words.forEach(w => {
    const [r, c] = w.start;
    w.number = State.grid[r][c].number;
  });
}

/* =====================
   RENDER
===================== */

function renderGrid() {
  const grid = document.getElementById('grid');
  grid.style.gridTemplateColumns = `repeat(${DATA.size}, var(--cell))`;
  grid.innerHTML = '';

  State.grid.flat().forEach(cell => {
    const div = document.createElement('div');
    div.className = 'cell';

    if (!cell.correct) {
      div.classList.add('empty');
    } else {
      if (cell.number) {
        const span = document.createElement('span');
        span.textContent = cell.number;
        div.appendChild(span);
      }

      const input = document.createElement('input');
      input.maxLength = 1;

      input.onfocus = () => activateByCell(cell);
      input.oninput = () => onInput(cell);
      input.onkeydown = e => onKey(e, cell);

      cell.input = input;
      div.appendChild(input);
    }

    cell.el = div;
    grid.appendChild(div);
  });
}

function renderClues() {
  const h = document.getElementById('clues-h');
  const v = document.getElementById('clues-v');

  DATA.words.forEach(w => {
    const li = document.createElement('li');
    li.textContent = `${w.number}. ${w.clue}`;
    li.onclick = () => activateWord(w);

    (w.dir === 'H' ? h : v).appendChild(li);
    w.clueEl = li;
  });
}

/* =====================
   INTERAÃ‡ÃƒO
===================== */

function activateByCell(cell) {
  const word = DATA.words.find(w => w.cells.includes(cell));
  activateWord(word);
}

function activateWord(word) {
  if (!word) return;

  clearHighlight();
  State.activeWord = word;

  word.cells.forEach(c => c.el.classList.add('highlight'));
  word.clueEl.classList.add('active');
}

function onInput(cell) {
  cell.letter = cell.input.value.toUpperCase();
  cell.input.value = cell.letter;

  const i = State.activeWord.cells.indexOf(cell);
  if (State.activeWord.cells[i + 1]) {
    State.activeWord.cells[i + 1].input.focus();
  }
}

function onKey(e, cell) {
  if (e.key === 'Backspace' && !cell.letter) {
    const i = State.activeWord.cells.indexOf(cell);
    if (State.activeWord.cells[i - 1]) {
      State.activeWord.cells[i - 1].input.focus();
    }
  }
}

/* =====================
   CHECK
===================== */

function checkAll() {
  DATA.words.forEach(w => {
    const ok = w.cells.every(c => c.letter === c.correct);
    w.cells.forEach(c => {
      c.el.classList.remove('correct','error');
      if (c.letter) c.el.classList.add(ok ? 'correct' : 'error');
    });
  });
}

function clearHighlight() {
  document.querySelectorAll('.cell').forEach(c =>
    c.classList.remove('highlight')
  );
  document.querySelectorAll('.clues li').forEach(l =>
    l.classList.remove('active')
  );
}
</script>
</body>
</html>
