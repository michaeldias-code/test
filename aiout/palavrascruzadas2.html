<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Palavras Cruzadas</title>

<style>
:root {
  --cell: 32px;
  --border: #ccc;
  --bg: #f4f6f7;
  --active: #ffeaa7;
  --highlight: #f1c40f;
  --correct: #d4f8c4;
  --error: #f8c4c4;
}

body {
  font-family: Arial, sans-serif;
  background: var(--bg);
  display: flex;
  justify-content: center;
  padding: 20px;
}

.container {
  background: white;
  padding: 20px;
  border-radius: 8px;
  max-width: 900px;
  width: 100%;
}

#grid {
  display: grid;
  margin-bottom: 20px;
}

.cell {
  width: var(--cell);
  height: var(--cell);
  border: 1px solid var(--border);
  position: relative;
  background: white;
}

.cell.empty {
  background: transparent;
  border: none;
}

.cell.highlight { background: var(--highlight); }
.cell.active { background: var(--active); }
.cell.correct { background: var(--correct); }
.cell.error { background: var(--error); }

.cell span {
  position: absolute;
  top: 2px;
  left: 3px;
  font-size: 0.6rem;
  font-weight: bold;
  color: #3498db;
}

.cell input {
  width: 100%;
  height: 100%;
  border: none;
  background: transparent;
  text-align: center;
  font-size: 1.2rem;
  font-weight: bold;
  text-transform: uppercase;
  outline: none;
}

.clues {
  display: flex;
  gap: 30px;
}

.clues ul {
  list-style: none;
  padding: 0;
}

.clues li {
  cursor: pointer;
  padding: 4px;
}

.clues li.active {
  background: var(--highlight);
  font-weight: bold;
}
</style>
</head>

<body>
<div class="container">
  <h2>Palavras Cruzadas</h2>

  <div id="grid"></div>

  <div class="clues">
    <div>
      <h3>Horizontal</h3>
      <ul id="clues-h"></ul>
    </div>
    <div>
      <h3>Vertical</h3>
      <ul id="clues-v"></ul>
    </div>
  </div>

  <button onclick="checkAll()">Verificar</button>
</div>

<script>
/* =====================
   DADOS
===================== */

const DATA = {
  size: 10,
  words: [
    { id: 1, dir: 'H', start: [0,0], word: 'CODIGO', clue: 'Instruções do computador' },
    { id: 2, dir: 'V', start: [0,2], word: 'IDEIA', clue: 'Origem de um projeto' },
    { id: 3, dir: 'V', start: [0,5], word: 'DRIVE', clue: 'Armazenamento' },
    { id: 4, dir: 'H', start: [2,2], word: 'DADOS', clue: 'Informação' },
    { id: 5, dir: 'V', start: [2,4], word: 'SOFTWARE', clue: 'Parte lógica' },
    { id: 6, dir: 'H', start: [4,1], word: 'CACHE', clue: 'Memória rápida' },
    { id: 7, dir: 'V', start: [4,7], word: 'HOST', clue: 'Servidor' },
    { id: 8, dir: 'H', start: [6,4], word: 'LOOP', clue: 'Repetição' },
    { id: 9, dir: 'H', start: [8,0], word: 'NUVEM', clue: 'Cloud' }
  ]
};

/* =====================
   ESTADO
===================== */

const State = {
  grid: [],
  words: [],
  activeWord: null,
  activeCell: null
};

/* =====================
   INIT
===================== */

function init() {
  createGrid();
  registerWords();
  renderGrid();
  renderClues();
}

/* =====================
   GRID & WORDS
===================== */

function createGrid() {
  State.grid = Array.from({ length: DATA.size }, (_, r) =>
    Array.from({ length: DATA.size }, (_, c) => ({
      r, c,
      letter: '',
      correct: null,
      words: [],
      number: null,
      el: null,
      input: null
    }))
  );
}

function registerWords() {
  State.words = DATA.words.map(w => {
    let [r, c] = w.start;
    const [dr, dc] = w.dir === 'H' ? [0,1] : [1,0];
    const cells = [];

    for (let i = 0; i < w.word.length; i++) {
      const cell = State.grid[r][c];
      cell.correct = w.word[i];
      cell.words.push(w.id);

      if (i === 0) cell.number = w.id;

      cells.push(cell);
      r += dr;
      c += dc;
    }

    return { ...w, cells };
  });
}

/* =====================
   RENDER
===================== */

function renderGrid() {
  const grid = document.getElementById('grid');
  grid.style.gridTemplateColumns = `repeat(${DATA.size}, var(--cell))`;
  grid.innerHTML = '';

  State.grid.flat().forEach(cell => {
    const div = document.createElement('div');
    div.className = 'cell';

    if (!cell.correct) {
      div.classList.add('empty');
    } else {
      if (cell.number) {
        const span = document.createElement('span');
        span.textContent = cell.number;
        div.appendChild(span);
      }

      const input = document.createElement('input');
      input.maxLength = 1;
      input.onfocus = () => focusCell(cell);
      input.oninput = () => handleInput(cell);
      input.onkeydown = e => handleKeys(e, cell);

      cell.input = input;
      div.appendChild(input);
    }

    cell.el = div;
    grid.appendChild(div);
  });
}

function renderClues() {
  const h = document.getElementById('clues-h');
  const v = document.getElementById('clues-v');

  State.words.forEach(w => {
    const li = document.createElement('li');
    li.textContent = `${w.id}. ${w.clue}`;
    li.onclick = () => activateWord(w);

    (w.dir === 'H' ? h : v).appendChild(li);
    w.clueEl = li;
  });
}

/* =====================
   CONTROLE
===================== */

function focusCell(cell) {
  const word = State.words.find(w => w.cells.includes(cell));
  activateWord(word);
  State.activeCell = cell;
}

function activateWord(word) {
  if (!word) return;
  clearHighlights();
  State.activeWord = word;

  word.cells.forEach(c => c.el.classList.add('highlight'));
  word.clueEl.classList.add('active');
}

function handleInput(cell) {
  cell.letter = cell.input.value.toUpperCase();
  cell.input.value = cell.letter;

  const idx = State.activeWord.cells.indexOf(cell);
  if (idx >= 0 && State.activeWord.cells[idx + 1]) {
    State.activeWord.cells[idx + 1].input.focus();
  }
}

function handleKeys(e, cell) {
  if (e.key === 'Backspace' && !cell.letter) {
    const idx = State.activeWord.cells.indexOf(cell);
    if (idx > 0) State.activeWord.cells[idx - 1].input.focus();
  }
}

/* =====================
   CHECK
===================== */

function checkAll() {
  State.words.forEach(w => {
    const ok = w.cells.every(c => c.letter === c.correct);
    w.cells.forEach(c => {
      c.el.classList.remove('correct','error');
      if (c.letter) c.el.classList.add(ok ? 'correct' : 'error');
    });
  });
}

function clearHighlights() {
  document.querySelectorAll('.cell').forEach(c =>
    c.classList.remove('highlight','active')
  );
  document.querySelectorAll('.clues li').forEach(l =>
    l.classList.remove('active')
  );
}

/* =====================
   START
===================== */

init();
</script>
</body>
</html>
